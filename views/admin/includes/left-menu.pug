- var linkClass = ''

mixin parseProjects(projects)
  each project in projects
    if (project.id == currentProjectId)
      - linkClass = 'active'
    else
      - linkClass = ''
    li(id=project.id, class=project.unfold ? 'unfold' : '').li-container
      .li-wrapper(class=linkClass)
        .menu-link
          div(class=project.hasChildren ? 'folder' : 'nothing', onclick= project.hasChildren ? 'toggleFold(this)' : '')
          a(href='/admin/project/' + project.id)
            span.upper.small= project.name
        a(href='/admin/delete/' + project.id).delete
          img
      if (project.hasChildren)
        ul(id='list_'+project.id).unstyled.sub-list.sortable.connectedSortable
          +parseProjects(project.children)


.left-container
  .top-section
    h1.slim-title MENÃœPUNKTE
    .project-form
      form.form
        .form-item
          //label Neues Projekt erstellen
          .append.w100
            input(type='text', name='project', data-whoid=currentProjectId)#project-name
            button.button.outline Go

  .project-list
    a(href='/admin').list-start Start
    ul.unstyled.sortable.connectedSortable.project-ul#main-list
      +parseProjects(projects)
