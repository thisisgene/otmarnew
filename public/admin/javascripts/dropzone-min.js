"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function __guard__(e,t){return void 0!==e&&null!==e?t(e):void 0}function __guardMethod__(e,t,i){return void 0!==e&&null!==e&&"function"==typeof e[t]?i(e,t):void 0}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),Emitter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"on",value:function e(t,i){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(i),this}},{key:"emit",value:function e(t){this._callbacks=this._callbacks||{};var i=this._callbacks[t];if(i){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var o=i,s=!0,l=0,o=o;;){var u;if(0){if(l=o.next(),l.done)break;u=l.value}else{if(l>=o.length)break;u=o[l++]}u.apply(this,r)}}return this}},{key:"off",value:function e(t,i){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1===arguments.length)return delete this._callbacks[t],this;for(var r=0;r<n.length;r++){if(n[r]===i){n.splice(r,1);break}}return this}}]),e}(),Dropzone=function(e){function t(e,i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=void 0,a=void 0;if(n.element=e,n.version=t.version,n.defaultOptions.previewTemplate=n.defaultOptions.previewTemplate.replace(/\n*/g,""),n.clickableElements=[],n.listeners=[],n.files=[],"string"==typeof n.element&&(n.element=document.querySelector(n.element)),!n.element||null==n.element.nodeType)throw new Error("Invalid dropzone element.");if(n.element.dropzone)throw new Error("Dropzone already attached.");t.instances.push(n),n.element.dropzone=n;var o=null!=(a=t.optionsForElement(n.element))?a:{};if(n.options=t.extend({},n.defaultOptions,o,null!=i?i:{}),n.options.forceFallback||!t.isBrowserSupported()){var s;return s=n.options.fallback.call(n),_possibleConstructorReturn(n,s)}if(null==n.options.url&&(n.options.url=n.element.getAttribute("action")),!n.options.url)throw new Error("No URL provided.");if(n.options.acceptedFiles&&n.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(n.options.uploadMultiple&&n.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return n.options.acceptedMimeTypes&&(n.options.acceptedFiles=n.options.acceptedMimeTypes,delete n.options.acceptedMimeTypes),null!=n.options.renameFilename&&(n.options.renameFile=function(e){return n.options.renameFilename.call(n,e.name,e)}),n.options.method=n.options.method.toUpperCase(),(r=n.getExistingFallback())&&r.parentNode&&r.parentNode.removeChild(r),!1!==n.options.previewsContainer&&(n.options.previewsContainer?n.previewsContainer=t.getElement(n.options.previewsContainer,"previewsContainer"):n.previewsContainer=n.element),n.options.clickable&&(!0===n.options.clickable?n.clickableElements=[n.element]:n.clickableElements=t.getElements(n.options.clickable,"clickable")),n.init(),n}return _inherits(t,e),_createClass(t,null,[{key:"initClass",value:function e(){this.prototype.Emitter=Emitter,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Bilder hier reinziehen",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function e(){},params:function e(t,i,n){if(n)return{dzuuid:n.file.upload.uuid,dzchunkindex:n.index,dztotalfilesize:n.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:n.file.upload.totalChunkCount,dzchunkbyteoffset:n.index*this.options.chunkSize}},accept:function e(t,i){return i()},chunksUploaded:function e(t,i){i()},fallback:function e(){var i=void 0;this.element.className=this.element.className+" dz-browser-not-supported";for(var n=this.element.getElementsByTagName("div"),r=!0,a=0,n=n;;){var o;if(0){if(a=n.next(),a.done)break;o=a.value}else{if(a>=n.length)break;o=n[a++]}var s=o;if(/(^| )dz-message($| )/.test(s.className)){i=s,s.className="dz-message";break}}i||(i=t.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(i));var l=i.getElementsByTagName("span")[0];return l&&(null!=l.textContent?l.textContent=this.options.dictFallbackMessage:null!=l.innerText&&(l.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function e(t,i,n,r){var a={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},o=t.width/t.height;null==i&&null==n?(i=a.srcWidth,n=a.srcHeight):null==i?i=n*o:null==n&&(n=i/o),i=Math.min(i,a.srcWidth),n=Math.min(n,a.srcHeight);var s=i/n;if(a.srcWidth>i||a.srcHeight>n)if("crop"===r)o>s?(a.srcHeight=t.height,a.srcWidth=a.srcHeight*s):(a.srcWidth=t.width,a.srcHeight=a.srcWidth/s);else{if("contain"!==r)throw new Error("Unknown resizeMethod '"+r+"'");o>s?n=i/o:i=n*o}return a.srcX=(t.width-a.srcWidth)/2,a.srcY=(t.height-a.srcHeight)/2,a.trgWidth=i,a.trgHeight=n,a},transformFile:function e(t,i){return(this.options.resizeWidth||this.options.resizeHeight)&&t.type.match(/image.*/)?this.resizeImage(t,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,i):i(t)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function e(t){return this.element.classList.remove("dz-drag-hover")},dragstart:function e(t){},dragend:function e(t){return this.element.classList.remove("dz-drag-hover")},dragenter:function e(t){return this.element.classList.add("dz-drag-hover")},dragover:function e(t){return this.element.classList.add("dz-drag-hover")},dragleave:function e(t){return this.element.classList.remove("dz-drag-hover")},paste:function e(t){},reset:function e(){return this.element.classList.remove("dz-started")},addedfile:function e(i){var n=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){i.previewElement=t.createElement(this.options.previewTemplate.trim()),i.previewTemplate=i.previewElement,this.previewsContainer.appendChild(i.previewElement);for(var r=i.previewElement.querySelectorAll("[data-dz-name]"),a=!0,o=0,r=r;;){var s;if(0){if(o=r.next(),o.done)break;s=o.value}else{if(o>=r.length)break;s=r[o++]}var l=s;l.textContent=i.name}for(var u=i.previewElement.querySelectorAll("[data-dz-size]"),d=!0,c=0,u=u;;){if(0){if(c=u.next(),c.done)break;l=c.value}else{if(c>=u.length)break;l=u[c++]}l.innerHTML=this.filesize(i.size)}this.options.addRemoveLinks&&(i._removeLink=t.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),i.previewElement.appendChild(i._removeLink));for(var p=function e(r){return r.preventDefault(),r.stopPropagation(),i.status===t.UPLOADING?t.confirm(n.options.dictCancelUploadConfirmation,function(){return n.removeFile(i)}):n.options.dictRemoveFileConfirmation?t.confirm(n.options.dictRemoveFileConfirmation,function(){return n.removeFile(i)}):n.removeFile(i)},h=i.previewElement.querySelectorAll("[data-dz-remove]"),f=!0,v=0,h=h;;){var m;if(0){if(v=h.next(),v.done)break;m=v.value}else{if(v>=h.length)break;m=h[v++]}m.addEventListener("click",p)}}},removedfile:function e(t){return null!=t.previewElement&&null!=t.previewElement.parentNode&&t.previewElement.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function e(t,i){if(t.previewElement){t.previewElement.classList.remove("dz-file-preview");for(var n=t.previewElement.querySelectorAll("[data-dz-thumbnail]"),r=!0,a=0,n=n;;){var o;if(0){if(a=n.next(),a.done)break;o=a.value}else{if(a>=n.length)break;o=n[a++]}var s=o;s.alt=t.name,s.src=i}return setTimeout(function(){return t.previewElement.classList.add("dz-image-preview")},1)}},error:function e(t,i){if(t.previewElement){t.previewElement.classList.add("dz-error"),"String"!=typeof i&&i.error&&(i=i.error);for(var n=t.previewElement.querySelectorAll("[data-dz-errormessage]"),r=!0,a=0,n=n;;){var o;if(0){if(a=n.next(),a.done)break;o=a.value}else{if(a>=n.length)break;o=n[a++]}o.textContent=i}}},errormultiple:function e(){},processing:function e(t){if(t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink))return t._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:function e(){},uploadprogress:function e(t,i,n){if(t.previewElement)for(var r=t.previewElement.querySelectorAll("[data-dz-uploadprogress]"),a=!0,o=0,r=r;;){var s;if(0){if(o=r.next(),o.done)break;s=o.value}else{if(o>=r.length)break;s=r[o++]}var l=s;"PROGRESS"===l.nodeName?l.value=i:l.style.width=i+"%"}},totaluploadprogress:function e(){},sending:function e(){},sendingmultiple:function e(){},success:function e(t){if(t.previewElement)return t.previewElement.classList.add("dz-success")},successmultiple:function e(){},canceled:function e(t){return this.emit("error",t,"Upload canceled.")},canceledmultiple:function e(){},complete:function e(t){if(t._removeLink&&(t._removeLink.textContent=this.options.dictRemoveFile),t.previewElement)return t.previewElement.classList.add("dz-complete")},completemultiple:function e(){},maxfilesexceeded:function e(){},maxfilesreached:function e(){},queuecomplete:function e(){},addedfiles:function e(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function e(t){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(var a=n,o=!0,s=0,a=a;;){var l;if(0){if(s=a.next(),s.done)break;l=s.value}else{if(s>=a.length)break;l=a[s++]}var u=l;for(var d in u){var c=u[d];t[d]=c}}return t}}]),_createClass(t,[{key:"getAcceptedFiles",value:function e(){return this.files.filter(function(e){return e.accepted}).map(function(e){return e})}},{key:"getRejectedFiles",value:function e(){return this.files.filter(function(e){return!e.accepted}).map(function(e){return e})}},{key:"getFilesWithStatus",value:function e(t){return this.files.filter(function(e){return e.status===t}).map(function(e){return e})}},{key:"getQueuedFiles",value:function e(){return this.getFilesWithStatus(t.QUEUED)}},{key:"getUploadingFiles",value:function e(){return this.getFilesWithStatus(t.UPLOADING)}},{key:"getAddedFiles",value:function e(){return this.getFilesWithStatus(t.ADDED)}},{key:"getActiveFiles",value:function e(){return this.files.filter(function(e){return e.status===t.UPLOADING||e.status===t.QUEUED}).map(function(e){return e})}},{key:"init",value:function e(){var i=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(t.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length){(function e(){return i.hiddenFileInput&&i.hiddenFileInput.parentNode.removeChild(i.hiddenFileInput),i.hiddenFileInput=document.createElement("input"),i.hiddenFileInput.setAttribute("type","file"),(null===i.options.maxFiles||i.options.maxFiles>1)&&i.hiddenFileInput.setAttribute("multiple","multiple"),i.hiddenFileInput.className="dz-hidden-input",null!==i.options.acceptedFiles&&i.hiddenFileInput.setAttribute("accept",i.options.acceptedFiles),null!==i.options.capture&&i.hiddenFileInput.setAttribute("capture",i.options.capture),i.hiddenFileInput.style.visibility="hidden",i.hiddenFileInput.style.position="absolute",i.hiddenFileInput.style.top="0",i.hiddenFileInput.style.left="0",i.hiddenFileInput.style.height="0",i.hiddenFileInput.style.width="0",document.querySelector(i.options.hiddenInputContainer).appendChild(i.hiddenFileInput),i.hiddenFileInput.addEventListener("change",function(){var t=i.hiddenFileInput.files;if(t.length)for(var n=t,r=!0,a=0,n=n;;){var o;if(0){if(a=n.next(),a.done)break;o=a.value}else{if(a>=n.length)break;o=n[a++]}var s=o;i.addFile(s)}return i.emit("addedfiles",t),e()})})()}this.URL=null!==window.URL?window.URL:window.webkitURL;for(var n=this.events,r=!0,a=0,n=n;;){var o;if(0){if(a=n.next(),a.done)break;o=a.value}else{if(a>=n.length)break;o=n[a++]}var s=o;this.on(s,this.options[s])}this.on("uploadprogress",function(){return i.updateTotalUploadProgress()}),this.on("removedfile",function(){return i.updateTotalUploadProgress()}),this.on("canceled",function(e){return i.emit("complete",e)}),this.on("complete",function(e){if(0===i.getAddedFiles().length&&0===i.getUploadingFiles().length&&0===i.getQueuedFiles().length)return setTimeout(function(){return i.emit("queuecomplete")},0)});var l=function e(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function e(t){return i.emit("dragstart",t)},dragenter:function e(t){return l(t),i.emit("dragenter",t)},dragover:function e(t){var n=void 0;try{n=t.dataTransfer.effectAllowed}catch(e){}return t.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",l(t),i.emit("dragover",t)},dragleave:function e(t){return i.emit("dragleave",t)},drop:function e(t){return l(t),i.drop(t)},dragend:function e(t){return i.emit("dragend",t)}}}],this.clickableElements.forEach(function(e){return i.listeners.push({element:e,events:{click:function n(r){return(e!==i.element||r.target===i.element||t.elementInside(r.target,i.element.querySelector(".dz-message")))&&i.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function e(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,t.instances.splice(t.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function e(){var t=void 0,i=0,n=0;if(this.getActiveFiles().length){for(var r=this.getActiveFiles(),a=!0,o=0,r=r;;){var s;if(0){if(o=r.next(),o.done)break;s=o.value}else{if(o>=r.length)break;s=r[o++]}var l=s;i+=l.upload.bytesSent,n+=l.upload.total}t=100*i/n}else t=100;return this.emit("totaluploadprogress",t,n,i)}},{key:"_getParamName",value:function e(t){return"function"==typeof this.options.paramName?this.options.paramName(t):this.options.paramName+(this.options.uploadMultiple?"["+t+"]":"")}},{key:"_renameFile",value:function e(t){return"function"!=typeof this.options.renameFile?t.name:this.options.renameFile(t)}},{key:"getFallbackForm",value:function e(){var i=void 0,n=void 0;if(i=this.getExistingFallback())return i;var r='<div class="dz-fallback">';this.options.dictFallbackText&&(r+="<p>"+this.options.dictFallbackText+"</p>"),r+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';var a=t.createElement(r);return"FORM"!==this.element.tagName?(n=t.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),n.appendChild(a)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=n?n:a}},{key:"getExistingFallback",value:function e(){for(var t=function e(t){for(var i=t,n=!0,r=0,i=i;;){var a;if(0){if(r=i.next(),r.done)break;a=r.value}else{if(r>=i.length)break;a=i[r++]}var o=a;if(/(^| )fallback($| )/.test(o.className))return o}},i=["div","form"],n=0;n<i.length;n++){var r=i[n],a;if(a=t(this.element.getElementsByTagName(r)))return a}}},{key:"setupEventListeners",value:function e(){return this.listeners.map(function(e){return function(){var t=[];for(var i in e.events){var n=e.events[i];t.push(e.element.addEventListener(i,n,!1))}return t}()})}},{key:"removeEventListeners",value:function e(){return this.listeners.map(function(e){return function(){var t=[];for(var i in e.events){var n=e.events[i];t.push(e.element.removeEventListener(i,n,!1))}return t}()})}},{key:"disable",value:function e(){var t=this;return this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),this.files.map(function(e){return t.cancelUpload(e)})}},{key:"enable",value:function e(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function e(t){var i=0,n="b";if(t>0){for(var r=["tb","gb","mb","kb","b"],a=0;a<r.length;a++){var o=r[a];if(t>=Math.pow(this.options.filesizeBase,4-a)/10){i=t/Math.pow(this.options.filesizeBase,4-a),n=o;break}}i=Math.round(10*i)/10}return"<strong>"+i+"</strong> "+this.options.dictFileSizeUnits[n]}},{key:"_updateMaxFilesReachedClass",value:function e(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function e(t){if(t.dataTransfer){this.emit("drop",t);var i=t.dataTransfer.files;if(this.emit("addedfiles",i),i.length){var n=t.dataTransfer.items;n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(i)}}}},{key:"paste",value:function e(t){if(null!=__guard__(null!=t?t.clipboardData:void 0,function(e){return e.items})){this.emit("paste",t);var i=t.clipboardData.items;return i.length?this._addFilesFromItems(i):void 0}}},{key:"handleFiles",value:function e(t){var i=this;return t.map(function(e){return i.addFile(e)})}},{key:"_addFilesFromItems",value:function e(t){var i=this;return function(){for(var e=[],n=t,r=!0,a=0,n=n;;){var o;if(0){if(a=n.next(),a.done)break;o=a.value}else{if(a>=n.length)break;o=n[a++]}var s=o,l;null!=s.webkitGetAsEntry&&(l=s.webkitGetAsEntry())?l.isFile?e.push(i.addFile(s.getAsFile())):l.isDirectory?e.push(i._addFilesFromDirectory(l,l.name)):e.push(void 0):null!=s.getAsFile&&(null==s.kind||"file"===s.kind)?e.push(i.addFile(s.getAsFile())):e.push(void 0)}return e}()}},{key:"_addFilesFromDirectory",value:function e(t,i){var n=this,r=t.createReader(),a=function e(t){return __guardMethod__(console,"log",function(e){return e.log(t)})};return function e(){return r.readEntries(function(t){if(t.length>0){for(var r=t,a=!0,o=0,r=r;;){var s;if(0){if(o=r.next(),o.done)break;s=o.value}else{if(o>=r.length)break;s=r[o++]}var l=s;l.isFile?l.file(function(e){if(!n.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath=i+"/"+e.name,n.addFile(e)}):l.isDirectory&&n._addFilesFromDirectory(l,i+"/"+l.name)}e()}return null},a)}()}},{key:"accept",value:function e(i,n){return i.size>1024*this.options.maxFilesize*1024?n(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(i.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):t.isValidFile(i,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(n(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",i)):this.options.accept.call(this,i,n):n(this.options.dictInvalidFileType)}},{key:"addFile",value:function e(i){var n=this;return i.upload={uuid:t.uuidv4(),progress:0,total:i.size,bytesSent:0,filename:this._renameFile(i),chunked:this.options.chunking&&(this.options.forceChunking||i.size>this.options.chunkSize),totalChunkCount:Math.ceil(i.size/this.options.chunkSize)},this.files.push(i),i.status=t.ADDED,this.emit("addedfile",i),this._enqueueThumbnail(i),this.accept(i,function(e){return e?(i.accepted=!1,n._errorProcessing([i],e)):(i.accepted=!0,n.options.autoQueue&&n.enqueueFile(i)),n._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function e(t){for(var i=t,n=!0,r=0,i=i;;){var a;if(0){if(r=i.next(),r.done)break;a=r.value}else{if(r>=i.length)break;a=i[r++]}var o=a;this.enqueueFile(o)}return null}},{key:"enqueueFile",value:function e(i){var n=this;if(i.status!==t.ADDED||!0!==i.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(i.status=t.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return n.processQueue()},0)}},{key:"_enqueueThumbnail",value:function e(t){var i=this;if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(t),setTimeout(function(){return i._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function e(){var t=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var i=this._thumbnailQueue.shift();return this.createThumbnail(i,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(e){return t.emit("thumbnail",i,e),t._processingThumbnail=!1,t._processThumbnailQueue()})}}},{key:"removeFile",value:function e(i){if(i.status===t.UPLOADING&&this.cancelUpload(i),this.files=without(this.files,i),this.emit("removedfile",i),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function e(i){null==i&&(i=!1);for(var n=this.files.slice(),r=!0,a=0,n=n;;){var o;if(0){if(a=n.next(),a.done)break;o=a.value}else{if(a>=n.length)break;o=n[a++]}var s=o;(s.status!==t.UPLOADING||i)&&this.removeFile(s)}return null}},{key:"resizeImage",value:function e(i,n,r,a,o){var s=this;return this.createThumbnail(i,n,r,a,!1,function(e,n){if(null===n)return o(i);var r=s.options.resizeMimeType;null==r&&(r=i.type);var a=n.toDataURL(r,s.options.resizeQuality);return"image/jpeg"!==r&&"image/jpg"!==r||(a=ExifRestore.restore(i.dataURL,a)),o(t.dataURItoBlob(a))})}},{key:"createThumbnail",value:function e(t,i,n,r,a,o){var s=this,l=new FileReader;return l.onload=function(){return t.dataURL=l.result,"image/svg+xml"===t.type?void(null!=o&&o(l.result)):s.createThumbnailFromUrl(t,i,n,r,a,o)},l.readAsDataURL(t)}},{key:"createThumbnailFromUrl",value:function e(t,i,n,r,a,o,s){var l=this,u=document.createElement("img");return s&&(u.crossOrigin=s),u.onload=function(){var e=function e(t){return t(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&a&&(e=function e(t){return EXIF.getData(u,function(){return t(EXIF.getTag(this,"Orientation"))})}),e(function(e){t.width=u.width,t.height=u.height;var a=l.options.resize.call(l,t,i,n,r),s=document.createElement("canvas"),d=s.getContext("2d");switch(s.width=a.trgWidth,s.height=a.trgHeight,e>4&&(s.width=a.trgHeight,s.height=a.trgWidth),e){case 2:d.translate(s.width,0),d.scale(-1,1);break;case 3:d.translate(s.width,s.height),d.rotate(Math.PI);break;case 4:d.translate(0,s.height),d.scale(1,-1);break;case 5:d.rotate(.5*Math.PI),d.scale(1,-1);break;case 6:d.rotate(.5*Math.PI),d.translate(0,-s.height);break;case 7:d.rotate(.5*Math.PI),d.translate(s.width,-s.height),d.scale(-1,1);break;case 8:d.rotate(-.5*Math.PI),d.translate(-s.width,0);break}drawImageIOSFix(d,u,null!=a.srcX?a.srcX:0,null!=a.srcY?a.srcY:0,a.srcWidth,a.srcHeight,null!=a.trgX?a.trgX:0,null!=a.trgY?a.trgY:0,a.trgWidth,a.trgHeight);var c=s.toDataURL("image/png");if(null!=o)return o(c,s)})},null!=o&&(u.onerror=o),u.src=t.dataURL}},{key:"processQueue",value:function e(){var t=this.options.parallelUploads,i=this.getUploadingFiles().length,n=i;if(!(i>=t)){var r=this.getQueuedFiles();if(r.length>0){if(this.options.uploadMultiple)return this.processFiles(r.slice(0,t-i));for(;n<t;){if(!r.length)return;this.processFile(r.shift()),n++}}}}},{key:"processFile",value:function e(t){return this.processFiles([t])}},{key:"processFiles",value:function e(i){for(var n=i,r=!0,a=0,n=n;;){var o;if(0){if(a=n.next(),a.done)break;o=a.value}else{if(a>=n.length)break;o=n[a++]}var s=o;s.processing=!0,s.status=t.UPLOADING,this.emit("processing",s)}return this.options.uploadMultiple&&this.emit("processingmultiple",i),this.uploadFiles(i)}},{key:"_getFilesWithXhr",value:function e(t){var i=void 0;return i=this.files.filter(function(e){return e.xhr===t}).map(function(e){return e})}},{key:"cancelUpload",value:function e(i){if(i.status===t.UPLOADING){for(var n=this._getFilesWithXhr(i.xhr),r=n,a=!0,o=0,r=r;;){var s;if(0){if(o=r.next(),o.done)break;s=o.value}else{if(o>=r.length)break;s=r[o++]}s.status=t.CANCELED}void 0!==i.xhr&&i.xhr.abort();for(var l=n,u=!0,d=0,l=l;;){var c;if(0){if(d=l.next(),d.done)break;c=d.value}else{if(d>=l.length)break;c=l[d++]}var p=c;this.emit("canceled",p)}this.options.uploadMultiple&&this.emit("canceledmultiple",n)}else i.status!==t.ADDED&&i.status!==t.QUEUED||(i.status=t.CANCELED,this.emit("canceled",i),this.options.uploadMultiple&&this.emit("canceledmultiple",[i]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function e(t){if("function"==typeof t){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return t.apply(this,n)}return t}},{key:"uploadFile",value:function e(t){return this.uploadFiles([t])}},{key:"uploadFiles",value:function e(i){var n=this;this._transformFiles(i,function(e){if(i[0].upload.chunked){var r=i[0],a=e[0],o=0;r.upload.chunks=[];var s=function e(){for(var s=0;void 0!==r.upload.chunks[s];)s++;if(!(s>=r.upload.totalChunkCount)){o++;var l=s*n.options.chunkSize,u=Math.min(l+n.options.chunkSize,r.size),d={name:n._getParamName(0),data:a.webkitSlice?a.webkitSlice(l,u):a.slice(l,u),filename:r.upload.filename,chunkIndex:s};r.upload.chunks[s]={file:r,index:s,dataBlock:d,status:t.UPLOADING,progress:0,retries:0},n._uploadData(i,[d])}};if(r.upload.finishedChunkUpload=function(e){var a=!0;e.status=t.SUCCESS,e.dataBlock=null;for(var o=0;o<r.upload.totalChunkCount;o++){if(void 0===r.upload.chunks[o])return s();r.upload.chunks[o].status!==t.SUCCESS&&(a=!1)}a&&n.options.chunksUploaded(r,function(){n._finished(i,"",null)})},n.options.parallelChunkUploads)for(var l=0;l<r.upload.totalChunkCount;l++)s();else s()}else{for(var u=[],d=0;d<i.length;d++)u[d]={name:n._getParamName(d),data:e[d],filename:i[d].upload.filename};n._uploadData(i,u)}})}},{key:"_getChunk",value:function e(t,i){for(var n=0;n<t.upload.totalChunkCount;n++)if(void 0!==t.upload.chunks[n]&&t.upload.chunks[n].xhr===i)return t.upload.chunks[n]}},{key:"_uploadData",value:function e(i,n){for(var r=this,a=new XMLHttpRequest,o=i,s=!0,l=0,o=o;;){var u;if(0){if(l=o.next(),l.done)break;u=l.value}else{if(l>=o.length)break;u=o[l++]}u.xhr=a}i[0].upload.chunked&&(i[0].upload.chunks[n[0].chunkIndex].xhr=a);var d=this.resolveOption(this.options.method,i),c=this.resolveOption(this.options.url,i);a.open(d,c,!0),
a.timeout=this.resolveOption(this.options.timeout,i),a.withCredentials=!!this.options.withCredentials,a.onload=function(e){r._finishedUploading(i,a,e)},a.onerror=function(){r._handleUploadError(i,a)},(null!=a.upload?a.upload:a).onprogress=function(e){return r._updateFilesUploadProgress(i,a,e)};var p={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};this.options.headers&&t.extend(p,this.options.headers);for(var h in p){var f=p[h];f&&a.setRequestHeader(h,f)}var v=new FormData;if(this.options.params){var m=this.options.params;"function"==typeof m&&(m=m.call(this,i,a,i[0].upload.chunked?this._getChunk(i[0],a):null));for(var g in m){var k=m[g];v.append(g,k)}}for(var b=i,y=!0,F=0,b=b;;){var w;if(0){if(F=b.next(),F.done)break;w=F.value}else{if(F>=b.length)break;w=b[F++]}var x=w;this.emit("sending",x,a,v)}this.options.uploadMultiple&&this.emit("sendingmultiple",i,a,v),this._addFormElementData(v);for(var E=0;E<n.length;E++){var z=n[E];v.append(z.name,z.data,z.filename)}this.submitRequest(a,v,i)}},{key:"_transformFiles",value:function e(t,i){for(var n=this,r=[],a=0,o=function e(o){n.options.transformFile.call(n,t[o],function(e){r[o]=e,++a===t.length&&i(r)})},s=0;s<t.length;s++)o(s)}},{key:"_addFormElementData",value:function e(t){if("FORM"===this.element.tagName)for(var i=this.element.querySelectorAll("input, textarea, select, button"),n=!0,r=0,i=i;;){var a;if(0){if(r=i.next(),r.done)break;a=r.value}else{if(r>=i.length)break;a=i[r++]}var o=a,s=o.getAttribute("name"),l=o.getAttribute("type");if(l&&(l=l.toLowerCase()),void 0!==s&&null!==s)if("SELECT"===o.tagName&&o.hasAttribute("multiple"))for(var u=o.options,d=!0,c=0,u=u;;){var p;if(0){if(c=u.next(),c.done)break;p=c.value}else{if(c>=u.length)break;p=u[c++]}var h=p;h.selected&&t.append(s,h.value)}else(!l||"checkbox"!==l&&"radio"!==l||o.checked)&&t.append(s,o.value)}}},{key:"_updateFilesUploadProgress",value:function e(t,i,n){var r=void 0;if(void 0!==n){if(r=100*n.loaded/n.total,t[0].upload.chunked){var a=t[0],o=this._getChunk(a,i);o.progress=r,o.total=n.total,o.bytesSent=n.loaded;var s=0,l=void 0,u=void 0;a.upload.progress=0,a.upload.total=0,a.upload.bytesSent=0;for(var d=0;d<a.upload.totalChunkCount;d++)void 0!==a.upload.chunks[d]&&void 0!==a.upload.chunks[d].progress&&(a.upload.progress+=a.upload.chunks[d].progress,a.upload.total+=a.upload.chunks[d].total,a.upload.bytesSent+=a.upload.chunks[d].bytesSent);a.upload.progress=a.upload.progress/a.upload.totalChunkCount}else for(var c=t,p=!0,h=0,c=c;;){var f;if(0){if(h=c.next(),h.done)break;f=h.value}else{if(h>=c.length)break;f=c[h++]}var v=f;v.upload.progress=r,v.upload.total=n.total,v.upload.bytesSent=n.loaded}for(var m=t,g=!0,k=0,m=m;;){var b;if(0){if(k=m.next(),k.done)break;b=k.value}else{if(k>=m.length)break;b=m[k++]}var y=b;this.emit("uploadprogress",y,y.upload.progress,y.upload.bytesSent)}}else{var F=!0;r=100;for(var w=t,x=!0,E=0,w=w;;){var z;if(0){if(E=w.next(),E.done)break;z=E.value}else{if(E>=w.length)break;z=w[E++]}var C=z;100===C.upload.progress&&C.upload.bytesSent===C.upload.total||(F=!1),C.upload.progress=r,C.upload.bytesSent=C.upload.total}if(F)return;for(var _=t,D=!0,S=0,_=_;;){var L;if(0){if(S=_.next(),S.done)break;L=S.value}else{if(S>=_.length)break;L=_[S++]}var A=L;this.emit("uploadprogress",A,r,A.upload.bytesSent)}}}},{key:"_finishedUploading",value:function e(i,n,r){var a=void 0;if(i[0].status!==t.CANCELED&&4===n.readyState){if("arraybuffer"!==n.responseType&&"blob"!==n.responseType&&(a=n.responseText,n.getResponseHeader("content-type")&&~n.getResponseHeader("content-type").indexOf("application/json")))try{a=JSON.parse(a)}catch(e){r=e,a="Invalid JSON response from server."}this._updateFilesUploadProgress(i),200<=n.status&&n.status<300?i[0].upload.chunked?i[0].upload.finishedChunkUpload(this._getChunk(i[0],n)):this._finished(i,a,r):this._handleUploadError(i,n,a)}}},{key:"_handleUploadError",value:function e(i,n,r){if(i[0].status!==t.CANCELED){if(i[0].upload.chunked&&this.options.retryChunks){var a=this._getChunk(i[0],n);if(a.retries++<this.options.retryChunksLimit)return void this._uploadData(i,[a.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}for(var o=i,s=!0,l=0,o=o;;){var u;if(0){if(l=o.next(),l.done)break;u=l.value}else{if(l>=o.length)break;u=o[l++]}var d=u;this._errorProcessing(i,r||this.options.dictResponseError.replace("{{statusCode}}",n.status),n)}}}},{key:"submitRequest",value:function e(t,i,n){t.send(i)}},{key:"_finished",value:function e(i,n,r){for(var a=i,o=!0,s=0,a=a;;){var l;if(0){if(s=a.next(),s.done)break;l=s.value}else{if(s>=a.length)break;l=a[s++]}var u=l;u.status=t.SUCCESS,this.emit("success",u,n,r),this.emit("complete",u)}if(this.options.uploadMultiple&&(this.emit("successmultiple",i,n,r),this.emit("completemultiple",i)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function e(i,n,r){for(var a=i,o=!0,s=0,a=a;;){var l;if(0){if(s=a.next(),s.done)break;l=s.value}else{if(s>=a.length)break;l=a[s++]}var u=l;u.status=t.ERROR,this.emit("error",u,n,r),this.emit("complete",u)}if(this.options.uploadMultiple&&(this.emit("errormultiple",i,n,r),this.emit("completemultiple",i)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}}]),t}(Emitter);Dropzone.initClass(),Dropzone.version="5.2.0",Dropzone.options={},Dropzone.optionsForElement=function(e){return e.getAttribute("id")?Dropzone.options[camelize(e.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var e=void 0;if(document.querySelectorAll)e=document.querySelectorAll(".dropzone");else{e=[];var t=function t(i){return function(){for(var t=[],n=i,r=!0,a=0,n=n;;){var o;if(0){if(a=n.next(),a.done)break;o=a.value}else{if(a>=n.length)break;o=n[a++]}var s=o;/(^| )dropzone($| )/.test(s.className)?t.push(e.push(s)):t.push(void 0)}return t}()};t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return function(){for(var t=[],i=e,n=!0,r=0,i=i;;){var a;if(0){if(r=i.next(),r.done)break;a=r.value}else{if(r>=i.length)break;a=i[r++]}var o=a;!1!==Dropzone.optionsForElement(o)?t.push(new Dropzone(o)):t.push(void 0)}return t}()},Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Dropzone.isBrowserSupported=function(){var e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(var t=Dropzone.blacklistedBrowsers,i=!0,n=0,t=t;;){var r;if(0){if(n=t.next(),n.done)break;r=n.value}else{if(n>=t.length)break;r=t[n++]}var a=r;a.test(navigator.userAgent)&&(e=!1)}else e=!1;else e=!1;return e},Dropzone.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),r=new Uint8Array(n),a=0,o=t.length,s=0<=o;s?a<=o:a>=o;s?a++:a--)r[a]=t.charCodeAt(a);return new Blob([n],{type:i})};var without=function e(t,i){return t.filter(function(e){return e!==i}).map(function(e){return e})},camelize=function e(t){return t.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})};Dropzone.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},Dropzone.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},Dropzone.getElement=function(e,t){var i=void 0;if("string"==typeof e?i=document.querySelector(e):null!=e.nodeType&&(i=e),null==i)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},Dropzone.getElements=function(e,t){var i=void 0,n=void 0;if(e instanceof Array){n=[];try{for(var r=e,a=!0,o=0,r=r;;){if(0){if(o=r.next(),o.done)break;i=o.value}else{if(o>=r.length)break;i=r[o++]}n.push(this.getElement(i,t))}}catch(e){n=null}}else if("string"==typeof e){n=[];for(var s=document.querySelectorAll(e),l=!0,u=0,s=s;;){if(0){if(u=s.next(),u.done)break;i=u.value}else{if(u>=s.length)break;i=s[u++]}n.push(i)}}else null!=e.nodeType&&(n=[e]);if(null==n||!n.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return n},Dropzone.confirm=function(e,t,i){return window.confirm(e)?t():null!=i?i():void 0},Dropzone.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");for(var i=e.type,n=i.replace(/\/.*$/,""),r=t,a=!0,o=0,r=r;;){var s;if(0){if(o=r.next(),o.done)break;s=o.value}else{if(o>=r.length)break;s=r[o++]}var l=s;if(l=l.trim(),"."===l.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(l.toLowerCase(),e.name.length-l.length))return!0}else if(/\/\*$/.test(l)){if(n===l.replace(/\/.*$/,""))return!0}else if(i===l)return!0}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new Dropzone(this,e)})}),"undefined"!=typeof module&&null!==module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success";var detectVerticalSquash=function e(t){var i=t.naturalWidth,n=t.naturalHeight,r=document.createElement("canvas");r.width=1,r.height=n;var a=r.getContext("2d");a.drawImage(t,0,0);for(var o=a.getImageData(1,0,1,n),s=o.data,l=0,u=n,d=n;d>l;){0===s[4*(d-1)+3]?u=d:l=d,d=u+l>>1}var c=d/n;return 0===c?1:c},drawImageIOSFix=function e(t,i,n,r,a,o,s,l,u,d){var c=detectVerticalSquash(i);return t.drawImage(i,n,r,a,o,s,l,u,d/c)},ExifRestore=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"initClass",value:function e(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function e(t){for(var i="",n=void 0,r=void 0,a="",o=void 0,s=void 0,l=void 0,u="",d=0;;)if(n=t[d++],r=t[d++],a=t[d++],o=n>>2,s=(3&n)<<4|r>>4,l=(15&r)<<2|a>>6,u=63&a,isNaN(r)?l=u=64:isNaN(a)&&(u=64),i=i+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(l)+this.KEY_STR.charAt(u),n=r=a="",o=s=l=u="",!(d<t.length))break;return i}},{key:"restore",value:function e(t,i){if(!t.match("data:image/jpeg;base64,"))return i;var n=this.decode64(t.replace("data:image/jpeg;base64,","")),r=this.slice2Segments(n),a=this.exifManipulation(i,r);return"data:image/jpeg;base64,"+this.encode64(a)}},{key:"exifManipulation",value:function e(t,i){var n=this.getExifArray(i),r=this.insertExif(t,n);return new Uint8Array(r)}},{key:"getExifArray",value:function e(t){for(var i=void 0,n=0;n<t.length;){if(i=t[n],255===i[0]&225===i[1])return i;n++}return[]}},{key:"insertExif",value:function e(t,i){var n=t.replace("data:image/jpeg;base64,",""),r=this.decode64(n),a=r.indexOf(255,3),o=r.slice(0,a),s=r.slice(a),l=o;return l=l.concat(i),l=l.concat(s)}},{key:"slice2Segments",value:function e(t){for(var i=0,n=[];;){var r;if(255===t[i]&218===t[i+1])break;if(255===t[i]&216===t[i+1])i+=2;else{r=256*t[i+2]+t[i+3];var a=i+r+2,o=t.slice(i,a);n.push(o),i=a}if(i>t.length)break}return n}},{key:"decode64",value:function e(t){var i="",n=void 0,r=void 0,a="",o=void 0,s=void 0,l=void 0,u="",d=0,c=[],p=/[^A-Za-z0-9\+\/\=]/g;for(p.exec(t)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");;)if(o=this.KEY_STR.indexOf(t.charAt(d++)),s=this.KEY_STR.indexOf(t.charAt(d++)),l=this.KEY_STR.indexOf(t.charAt(d++)),u=this.KEY_STR.indexOf(t.charAt(d++)),n=o<<2|s>>4,r=(15&s)<<4|l>>2,a=(3&l)<<6|u,c.push(n),64!==l&&c.push(r),64!==u&&c.push(a),n=r=a="",o=s=l=u="",!(d<t.length))break;return c}}]),e}();ExifRestore.initClass();var contentLoaded=function e(t,i){var n=!1,r=!0,a=t.document,o=a.documentElement,s=a.addEventListener?"addEventListener":"attachEvent",l=a.addEventListener?"removeEventListener":"detachEvent",u=a.addEventListener?"":"on",d=function e(r){if("readystatechange"!==r.type||"complete"===a.readyState)return("load"===r.type?t:a)[l](u+r.type,e,!1),!n&&(n=!0)?i.call(t,r.type||r):void 0},c=function e(){try{o.doScroll("left")}catch(t){return void setTimeout(e,50)}return d("poll")};if("complete"!==a.readyState){if(a.createEventObject&&o.doScroll){try{r=!t.frameElement}catch(e){}r&&c()}return a[s](u+"DOMContentLoaded",d,!1),a[s](u+"readystatechange",d,!1),t[s](u+"load",d,!1)}};Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction);