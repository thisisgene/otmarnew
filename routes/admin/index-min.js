function updateParent(e){Project.findById(e,function(e,n){})}var express=require("express"),router=express.Router(),mongoose=require("mongoose"),Project=mongoose.model("Project");router.get("/",function(e,n,o){Project.find(function(e,o){n.render("admin/index",{title:"Admin",projects:o})})}),router.post("/create_project",function(e,n){var o=e.body.name;console.log(o),new Project({name:o,deleted:!1}).save(function(e,o){e||n.send(o._id)})}),router.post("/create_sub_project",function(e,n){var o=e.body.name,t=e.body.parent,r=new Project({name:o,deleted:!1,hasParent:!0,parentId:t});r.save(),Project.findById(t,function(e,o){e?console.log(e):(console.log(o),o.children.push(r._id),o.hasChildren=!0,o.save(function(e,o){n.send("success")}))})}),router.get("/delete/:id",function(e,n){var o=e.params.id;Project.findById(o,function(e,o){o.deleted=!0,o.save(function(e,o){n.redirect("/admin")})})}),router.get("/project/:id",function(e,n,o){Project.find(function(o,t){n.render("admin/index",{title:"Admin",projects:t,currentProjectId:e.params.id})})}),router.post("/save_all",function(e,n){var o=e.body,t=o.id,r=o.description;Project.findById(t,function(e,o){o.description=r,o.save(function(e){e?n.send(e):n.send("success")})})}),module.exports=router;